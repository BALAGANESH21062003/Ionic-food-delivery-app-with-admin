{"version":3,"sources":["../../src/pages/all-restaurants/all-restaurants.module.ts","../../src/pages/all-restaurants/all-restaurants.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AllRestaurantsPage } from './all-restaurants';\nimport { Ionic2RatingModule } from 'ionic2-rating';\n\n@NgModule({\n  declarations: [\n    AllRestaurantsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AllRestaurantsPage),\n    Ionic2RatingModule\n  ],\n})\nexport class AllRestaurantsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/all-restaurants/all-restaurants.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { NativeMapContainerProvider } from '../../providers/native-map-container/native-map-container';\nimport { ProfileProvider } from '../../providers/profile/profile';\nimport { ActivityProvider } from '../../providers/activity/activity';\nimport { PopUpProvider } from '../../providers/pop-up/pop-up';\nimport { DirectionserviceProvider } from '../../providers/directionservice/directionservice';\nimport { OnesignalProvider } from '../../providers/onesignal/onesignal';\nimport { GeocoderProvider } from '../../providers/geocoder/geocoder';\nimport { CallNumber } from '@ionic-native/call-number';\nimport { OneSignal} from '@ionic-native/onesignal';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { StripeProvider } from '../../providers/stripe/stripe';\nimport { PaystackProvider } from '../../providers/paystack/paystack';\nimport { LanguageProvider } from '../../providers/language/language';\nimport { DirectorProvider } from '../../providers/director/director';\ndeclare var google;\n/**\n * Generated class for the AllRestaurantsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-all-restaurants',\n  templateUrl: 'all-restaurants.html',\n})\nexport class AllRestaurantsPage {\n   items: any;\n   locations: any;\n   check: any;\n \n   hotels: { _id: string; name: string; address: string; image: string; minprices: number; distance: number; open: boolean; commonfood: string; rate: number; }[];\n\n\n  constructor(public director: DirectorProvider, public act: ActivityProvider, public navCtrl: NavController, public dProvider: DirectionserviceProvider, public modalCtrl: ModalController, public myGcode: GeocoderProvider, public pop: PopUpProvider, public ph: ProfileProvider, public navParams: NavParams, public cMAP: NativeMapContainerProvider) {\n  }\n\n  ionViewDidLoad(){\n\n    this.act.getActivityProfile(this.ph.id).child('Client_Location').on('value', snap => {\n   if (snap.val()){\n   \n    this.navCtrl.push('TrackerPage')\n    console.log(snap.val())\n    this.act.getActivityProfile(this.ph.id).child('Client_Location').off('value')\n     }else{\n  this.act.getActivityProfile(this.ph.id).child('Client_Location').off('value')\n  this.showModale();\n  this.cMAP.loadMap();\n  this.ph.getUserProfile().child('Basket').on('value', userProfileSnapshot => {\n   \n    if (userProfileSnapshot.val() != null){\n      \n        this.director.total = userProfileSnapshot.val().total;\n        this.director.check = userProfileSnapshot.numChildren();\n      \n    console.log(userProfileSnapshot.numChildren())\n        return false\n    }\n  })\n  \n}\n  })\n  }\n\n  \n  PickLocation(){\n    this.showModale()\n  }\n\n  showModale(){\n     //console.log(this.myGcode.locationName)\n     let modal = this.modalCtrl.create('AutocompletePage');\n     modal.onDidDismiss(data => {\n       //Open the address modal on location bar click to change location\n       //console.log(data)\n       //let myPos = new google.maps.LatLng(this.lat, this.lng)\n      //Open the address modal on destination bar click to change destination\n     if (data != null){\n      // document.getElementById(\"destination\").innerText = data;\n      // this.myGcode.destinationSetName = data\n       \n      // this.pop.presentLoader('');\n      \n       ///After data input, check to see if user selected to add a destination or to calculate distance.\n       this.myGcode.geocoder.geocode( { 'address': data}, (results, status) => {\n         if (status === 'OK') {\n           console.log(data)\n           this.myGcode.locationName = data\n           this.myGcode.shortName = results[0].address_components[0].short_name\n           var position = results[0].geometry.location;\n           let calPos = new google.maps.LatLng(position.lat(), position.lng());\n            this.instansiate(position.lat(), position.lng());\n            \n            this.cMAP.lat = position.lat();\n            this.cMAP.lng = position.lng();\n         } else {\n        \n         }\n       });\n       \n     }else{\n      this.instansiate(this.cMAP.lat, this.cMAP.lng);\n     \n     }\n     });\n     modal.present();\n  }\n\n  instansiate(lat, lng){\n    let done = true\n    this.pop.presentLoader('')\n    this.ph.getResturantProfile().on('value', userProfileSnapshot => {\n      this.items = [];\n      this.locations = [];\n    \n      \n      \n      \n      console.log(lat, lng, this.myGcode.locationName)\n      let begin = new google.maps.LatLng(lat, lng)\n    userProfileSnapshot.forEach( snap => {\n       // alert(lat)\n         let end = new google.maps.LatLng(snap.val().location[0], snap.val().location[1])\n         let apart = google.maps.geometry.spherical.computeDistanceBetween(begin, end)*3\n        \n      if (apart/1000 <= 1000){\n           this.locations.push(this.dProvider.duration)\n           done = true;\n          \n            if (this.pop.dismissLoader != null)\n            this.pop.hideLoader();\n           \n          this.items.push({\n            key: snap.key,\n            image: snap.val().pic,\n            name: snap.val().name,\n            price: snap.val().price,\n            address: this.myGcode.place,\n            location: snap.val().location,\n            pos: snap.val().locationName,\n            openTime: snap.val().open,\n            closeTime: snap.val().closed,\n            phone: snap.val().phone,\n            _id: '1',\n            minprices: 15,\n            distance: this.dProvider.duration,\n            open: true,\n            rate: snap.val().rate,\n            fav: snap.val().fav,\n            status: '20',\n          });\n\n          this.hotels = this.items;\n          console.log(this.items)\n       \n         // clearTimeout(rush);\n        }\n\n        \n          console.log(this.items)\n          return false\n      \n          \n        \n        });\n    })\n  }\n\n\n  goDetails(item){\n    this.navCtrl.push('RestaurantDetailsPage')\n    this.director.restuarant_Detail = item\n    console.log(item);\n  }\n\n  Accept(){\n    this.navCtrl.push('BasketPage')\n  }\n\n  presentFilter() {\n\t\tlet modal = this.modalCtrl.create('FilterPage')\n\t\tmodal.present();\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/all-restaurants/all-restaurants.ts"],"sourceRoot":""}